<!DOCTYPE html>
<html>

<head>
  <title> å¦‚ä½•æœ€å¿«æ­å»ºä¸ªäººç½‘ç«™ &middot; jyh.im </title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.62.0-DEV" />


<link rel="stylesheet" href="https://sleephu.github.io/css/vec.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/favicon.ico">


<link href="" rel="alternate" type="application/rss+xml" title="jyh.im" />

</head>

<body>
  <header>
  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://sleephu.github.io">/home/jyh.im</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="https://sleephu.github.io/contact">~/contact</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="https://sleephu.github.io/study">~/study</a>
      </li>
      
      
      <li class="pull-left ">
        <a href="https://sleephu.github.io/lsz">~/lsz</a>
      </li>
      
      
      <li class="pull-left current">
        <a href="https://sleephu.github.io/post">~/post</a>
      </li>
      
  
      <li class="pull-right"><a href=""><i class="fas fa-rss"></i></a></li>
    </ul>
  </nav>
</header>
  <div class="content toc">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#preparation">Preparation</a></li>
    <li><a href="#fastest-way">Fastest way</a>
      <ul>
        <li><a href="#step-1-hugo-site-">Step 1: åœ¨æœ¬åœ°å»ºä¸€ä¸ªHugo Site å¹¶å®‰è£…ä¸»é¢˜</a></li>
        <li><a href="#step-2-hugo-site--github-pages">Step 2: éƒ¨ç½²Hugo Site åˆ° GitHub Pages</a></li>
        <li><a href="#step-3-travis-ci-">Step 3: åˆ©ç”¨Travis CI è‡ªåŠ¨éƒ¨ç½²</a></li>
        <li><a href="#step-4-">Step 4: åšå®¢ç”Ÿæˆä¸ç®¡ç†</a></li>
      </ul>
    </li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav>
    
    <section class="post">
      <h1 class="post-title"><a href="https://sleephu.github.io/post/site/">å¦‚ä½•æœ€å¿«æ­å»ºä¸ªäººç½‘ç«™</a></h1>
      <span class="post-date">Feb 23, 2019 </span>
      <div class="post-content">
        <h1 id="hugo--github-page--travis">Hugo + Github Page + Travis</h1>
<h2 id="introduction">Introduction</h2>
<p><strong>Hugo + Github æ­å»ºå…è´¹ä¸ªäººç½‘ç«™</strong></p>
<p>æˆ‘æ­å»ºä¸ªäººç½‘ç«™çš„æ—¶å€™çœ‹äº†å¾ˆå¤šç›¸å…³çš„æ•™ç¨‹ï¼Œä½†æ˜¯æ¯æ¬¡ï¼ˆæ˜¯çš„ï¼Œæˆ‘æ­å»ºäº†å¾ˆå¤šæ¬¡ï¼‰æ€»æœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯æˆ‘å¾ˆé•¿ä¸€æ®µæ—¶é—´ä¸å†™åšå®¢ä¹‹åï¼Œå°±å¿˜è®°å¦‚ä½•æ­£ç¡®éƒ¨ç½²å‘å¸ƒäº† (ğŸ˜“)ï¼Œæ‰€ä»¥åˆé‡æ–°æ­å»ºã€‚</p>
<p>æ¯æ¬¡æ­å»ºéƒ½ä¼šå­¦åˆ°æ–°çŸ¥è¯†ç‚¹ï¼Œè¿™æ¬¡æ‰“ç®—<strong>æ€»ç»“</strong>ä¸€ä¸‹ï¼Œé€ ç¦&hellip;æœªæ¥çš„æˆ‘è‡ªå·±ã€‚</p>
<h2 id="preparation">Preparation</h2>
<ul>
<li><input disabled="" type="checkbox">Github account</li>
<li><input disabled="" type="checkbox">Hugo download</li>
</ul>
<p>ç½‘ä¸Šå¾ˆå¤štutorialä¼šè¯¦ç»†ä»‹ç»ï¼Œåœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>
<h2 id="fastest-way">Fastest way</h2>
<p><strong>å°ç™½é€Ÿæˆï¼šæœ€å¿«ï¼Œçš„æ­å»ºè¿‡ç¨‹</strong></p>
<p>ä»¥ä¸‹å†…å®¹å¤§å¤šæ•°å‚è€ƒè¿™ä¸ª<a href="https://segmentfault.com/a/1190000012975914">tutorial</a>ï¼Œ å¼ºçƒˆæ¨èï¼</p>
<h3 id="step-1-hugo-site-">Step 1: åœ¨æœ¬åœ°å»ºä¸€ä¸ªHugo Site å¹¶å®‰è£…ä¸»é¢˜</h3>
<h4 id="heading">å®‰è£…</h4>
<p>ç¯å¢ƒï¼šmacOS</p>
<pre><code>brew install hugo

# æ£€æŸ¥å®‰è£…æˆåŠŸ
hugo version 
</code></pre><h4 id="site">æ–°å»ºsite</h4>
<pre><code>hugo new site blog
cd blog
git init
#Congratulations! Your new Hugo site is created in /Users/sleephu/Dropbox/website/blog.

#Just a few more steps and you're ready to go:
#
#1. Download a theme into the same-named folder.
#   Choose a theme from https://themes.gohugo.io/, or
#   create your own with the &quot;hugo new theme &lt;THEMENAME&gt;&quot; command.
#2. Perhaps you want to add some content. You can add single files
#   with &quot;hugo new &lt;SECTIONNAME&gt;/&lt;FILENAME&gt;.&lt;FORMAT&gt;&quot;.
#3. Start the built-in live server via &quot;hugo server&quot;.
#
#Visit https://gohugo.io/ for quickstart guide and full documentation.

# ç›®å½•ç»“æ„
tree blog
#blog
#â”œâ”€â”€ archetypes
#â”‚   â””â”€â”€ default.md
#â”œâ”€â”€ config.toml
#â”œâ”€â”€ content
#â”œâ”€â”€ data
#â”œâ”€â”€ layouts
#â”œâ”€â”€ static
#â””â”€â”€ themes
</code></pre><h4 id="heading-1">å®‰è£…ä¸»é¢˜</h4>
<p>å» <a href="http://themes.gohugo.io/">themes.gohugo.io</a> é€‰æ‹©å–œæ¬¢çš„ä¸»é¢˜ï¼Œä¸‹è½½åˆ° themes ç›®å½•ä¸­ï¼Œç„¶åæŒ‰ç…§ä¸»é¢˜çš„è¯´æ˜å¯¹ config.toml åšç›¸åº”é…ç½®ï¼ˆä¸€èˆ¬å¯ä»¥ç›´æ¥ç”¨ä¸»é¢˜é‡Œé¢çš„exampleSiteçš„config.toml, åªéœ€è¦åšä¸€äº›å‚æ•°ä¿®æ”¹ï¼‰ï¼Œæˆ‘ç”¨çš„ä¸»é¢˜æ˜¯ <a href="https://themes.gohugo.io/hugo-theme-vec/">vec</a></p>
<p>æœ‰ä¸ªtutorialè¯´åˆ°ä¸‹è½½ä¸»é¢˜çš„æ–¹å¼ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ç¬¬äºŒç§ï¼š</p>
<h5 id="1-">1. ä¸‹è½½</h5>
<ul>
<li>
<p>å¯ä»¥ç›´æ¥  <code>clone</code>  åˆ°  <code>themes</code>  ç›®å½•ä¸‹ï¼Œä¼˜ç‚¹æ˜¯å¦‚æœå¯¹ä¸»é¢˜æœ‰è°ƒæ•´éœ€æ±‚å¯ä»¥åŒæ—¶æäº¤åˆ° git æ§åˆ¶ä¸­ã€‚</p>
<pre><code>git clone https://themes.gohugo.io/hugo-theme-vec/ themes/vec
</code></pre></li>
<li>
<p>ä¹Ÿå¯ä»¥æ·»åŠ åˆ° git çš„ submodule ä¸­ï¼Œä¼˜ç‚¹æ˜¯åé¢è®²åˆ°ç”¨ travis è‡ªåŠ¨éƒ¨ç½²æ—¶æ¯”è¾ƒæ–¹ä¾¿ã€‚å¦‚æœéœ€è¦å¯¹ä¸»é¢˜åšæ›´æ”¹ï¼Œæœ€å¥½ fork ä¸»é¢˜å†åšæ”¹åŠ¨ã€‚</p>
<pre><code>git submodule add https://themes.gohugo.io/hugo-theme-vec/ themes/vec
</code></pre></li>
</ul>
<h5 id="2-">2. ä¸»é¢˜åº”ç”¨</h5>
<p>å¤åˆ¶ exampleSite ä¸­ config.tomlçš„</p>
<pre><code>cp -r themes/vec/exampleSite/config.toml .
</code></pre><p>ä¿®æ”¹å‚æ•°</p>
<pre><code>vi config.toml
</code></pre><p>å¤åˆ¶exampleSiteä¸­çš„æ–‡ç« </p>
<pre><code>cp -r themes/vec/exampleSite/content content/
cp - themes/vec/exampleSite/static static/
</code></pre><p>æ–°å»ºæ–‡ç« </p>
<pre><code>hugo new post/test.md
</code></pre><h5 id="3-">3. é¢„è§ˆ</h5>
<p>æ‰§è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ Hugo ç”Ÿæˆé™æ€å†…å®¹å¹¶åœ¨å¯åŠ¨æœ¬åœ° HTTP Serverã€‚ç„¶åå³å¯è®¿é—®  <a href="http://localhost/">http://localhost</a>:1313/ æŸ¥çœ‹æ•ˆæœã€‚</p>
<pre><code>hugo server -D
#...
#Web Server is available at http://localhost:1313/ (bind address 127.0.0.1)
</code></pre><h3 id="step-2-hugo-site--github-pages">Step 2: éƒ¨ç½²Hugo Site åˆ° GitHub Pages</h3>
<p>æœ€ç»ˆæˆ‘ä»¬éœ€è¦æŠŠåšå®¢éƒ¨ç½²åˆ°ä¸€ä¸ªæ‰˜ç®¡æœåŠ¡ï¼Œå…è´¹ç¨³å®šçš„ Github Pages æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>
<h4 id="repository">æ–°å»ºä¸¤ä¸ªrepository</h4>
<p>åœ¨Github ä¸Šæ–°å»ºä¸¤ä¸ªrepository</p>
<ul>
<li><code>&lt;YOUR-PROJECT&gt;</code> (e.g. <code>blog</code>) (e.g blog) ï¼ˆç”¨äºæ‰˜ç®¡æ‰€æœ‰çš„Hugo æ–‡ä»¶ï¼‰</li>
<li><code>&lt;USERNAME&gt;</code>.github.io ï¼ˆç”¨äºå±•ç¤ºHugo Site, contain the fully rendered version of your Hugo website.ï¼‰</li>
</ul>
<h4 id="heading-2">éƒ¨ç½²</h4>
<p>ä»¥ä¸‹æ­¥éª¤å‚è€ƒ <a href="https://segmentfault.com/a/1190000012975914">reference 1</a> ä¸­ <strong>## éƒ¨ç½²åˆ° GitHub Pages</strong></p>
<ol>
<li>
<p>å…ˆæŠŠæºç æäº¤åˆ° GitHub çš„ä¸€ä¸ª repo (æºç  repo &mdash; blog)</p>
<pre><code>git add -A
git commint -m &quot;initial hugo files&quot;
git remote add origin https://github.com/&lt;username&gt;/blog
git push -u origin master
</code></pre></li>
<li>
<p>config.toml çš„ <code>baseURL</code> è¦è®¾ç½®æˆ <code>https://&lt;username&gt;.github.io</code></p>
</li>
</ol>
<h3 id="step-3-travis-ci-">Step 3: åˆ©ç”¨Travis CI è‡ªåŠ¨éƒ¨ç½²</h3>
<p>åˆ©ç”¨ Travis CIè‡ªåŠ¨éƒ¨ç½²ï¼Œå®ç°äº†blog repoæœ‰æ”¹åŠ¨å°±ä¼šè‡ªåŠ¨éƒ¨ç½²åˆ° <code>&lt;username&gt;</code>.github.io</p>
<ol>
<li>
<p>ç”Ÿæˆ <a href="https://github.com/settings/tokens/new">Github Access Token</a>ï¼Œè‡³å°‘è¦æœ‰ public_repo çš„æƒé™ã€‚
<img src="https://image-static.segmentfault.com/327/147/3271470318-5a68537f7c98a" alt=""></p>
</li>
<li>
<p>é…ç½® Travis
å»  <a href="https://travis-ci.org/">Travis CI</a>  æ³¨å†Œå…³è” Github çš„è´¦å·ï¼Œç„¶ååŒæ­¥è´¦æˆ·å¹¶æ¿€æ´» blog repoã€‚<img src="https://image-static.segmentfault.com/386/708/3867089403-5a6854a99ac7e" alt=""></p>
</li>
</ol>
<p>æ¥ç€è¿›å…¥ blog çš„è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©è‡ªåŠ¨éƒ¨ç½²è§¦å‘æ¡ä»¶ï¼Œå¹¶æŠŠåˆšåˆšç”Ÿæˆçš„ GitHub Access Token æ·»åŠ åˆ°ç¯å¢ƒå˜é‡é‡Œã€‚<img src="https://image-static.segmentfault.com/482/028/482028402-5a6854b6312ef" alt=""></p>
<ol start="3">
<li>æ·»åŠ  <strong>.travis.yml</strong> æ–‡ä»¶</li>
</ol>
<p>åœ¨blog repo ä¸­æ·»åŠ  <strong>.travis.yml</strong>ï¼ˆæ”¾åœ¨blog æ ¹ç›®å½•ï¼‰</p>
<pre><code>sudo: false
language: go
git:
    depth: 1
install: go get -v github.com/gohugoio/hugo
script:
      hugo
deploy:
    provider: pages
    skip_cleanup: true
    github_token: $GITHUB_TOKEN
    on:
        branch: master
    local_dir: public
    repo: &lt;username&gt;/&lt;username&gt;.github.io
    fqdn: &lt;custom-domain-if-needed&gt;
    target_branch: master
    email: &lt;github-email&gt;
    name: &lt;github-username&gt;
</code></pre><p><strong>é‡ç‚¹è¯´ä¸‹è¿™ä¸ªéƒ¨åˆ†ï¼Œtutorialé‡Œé¢çš„</strong></p>
<pre><code>script: 
	 - hugo
</code></pre><p><strong>åº”è¯¥æ˜¯ï¼š</strong></p>
<pre><code>script:
      hugo
</code></pre><p>å…¶ä½™çš„å‚æ•°é…ç½®å¯ä»¥æ ¹æ®è‡ªå·±æƒ…å†µè°ƒæ•´ï¼Œæ¯”å¦‚ <strong>fqdn</strong>ï¼Œ å¯ä»¥å¡«ä¸Šä¸ªäººåŸŸåï¼ŒTravis CI ä¼šè‡ªåŠ¨ç”Ÿæˆ CNAME æ–‡ä»¶ï¼Œå…³äºå¦‚ä½•é…ç½®ä¸ªäººåŸŸåï¼Œå¯ä»¥å‚è€ƒ <a href="https://zhuanlan.zhihu.com/p/37752930">è¿™ç¯‡æ–‡ç« </a> <strong># é…ç½®ä¸ªäººåŸŸå</strong></p>
<p>æœ€åï¼Œå¯ä»¥æ‰‹åŠ¨å» travis è§¦å‘ä¸€æ¬¡ build æ£€æŸ¥æ•ˆæœã€‚å¦‚æœè®¾ç½®äº†æäº¤è§¦å‘ buildï¼Œä¹‹åæ¯æ¬¡ blog repo æœ‰æäº¤éƒ½ä¼šè‡ªåŠ¨ buildï¼Œä¸å†éœ€è¦å…³å¿ƒ travis çŠ¶æ€ã€‚</p>
<h3 id="step-4-">Step 4: åšå®¢ç”Ÿæˆä¸ç®¡ç†</h3>
<p>ä¸ºäº†ä»¥åæ›´åŠ æ–¹ä¾¿åœ°ç”Ÿæˆç®¡ç†åšå®¢ï¼Œå¯ä»¥å†™ä¸€ä¸ªscript (e.g deploy.sh)ï¼Œæ”¾åœ¨blog æ ¹ç›®å½•ï¼š</p>
<p>deploy.sh</p>
<pre><code>#!/bin/sh

echo &quot;Deleting old publication&quot;
rm -rf public

# content update
hugo

echo &quot;deploy&quot; # æ›´æ–°åˆ° blog repo
git add -A
git commit -m &quot;update&quot;
git push -u origin master
</code></pre><p>ä»¥åçš„åšå®¢æ›´æ–°æ­¥éª¤ï¼š</p>
<ol>
<li>å†™åšå®¢</li>
</ol>
<pre><code>hugo new post/&lt;filename&gt;.md # æ–°å»ºåšå®¢
vi content/post/&lt;filename&gt;.md # ç¼–è¾‘åšå®¢
</code></pre><ol start="2">
<li>éƒ¨ç½²åˆ° blog repo</li>
</ol>
<pre><code>sudo sh deploy.sh
</code></pre><ol start="3">
<li>å¦‚æœTravis CIéƒ¨ç½²æˆåŠŸçš„è¯ï¼Œå®ƒä¼šè‡ªåŠ¨æ£€æµ‹åˆ° blog repoçš„æ›´æ–°ï¼Œä¼šæŠŠHugoå†…å®¹è‡ªåŠ¨éƒ¨ç½²åˆ°çœŸæ­£çš„ç½‘ç«™ <code>&lt;username&gt;.github.io</code></li>
</ol>
<p>è¿™æ ·ä»¥ååªéœ€è¦ä¸“å¿ƒå†™blogå•¦ï¼</p>
<p>æœ€è¿‘ä¼šæ•´ç†ä¸€äº›å·¥ä½œç»éªŒçš„æ–‡ç« ï¼Œæ¬¢è¿ğŸ‘å…³æ³¨æˆ‘çš„blogï¼š <a href="http://jyhu.ml/">http://jyhu.ml/</a></p>
<h2 id="reference">Reference</h2>
<p>å–æ°´ä¸å¿˜æŒ–äº•äººï¼Œè¿™é‡Œé™„ä¸Šä¸€äº›å¯¹æˆ‘å¸®åŠ©å¾ˆå¤§çš„ä¸€äº›å‚è€ƒæ–‡ç« ï¼š</p>
<ol>
<li><a href="https://segmentfault.com/a/1190000012975914">https://segmentfault.com/a/1190000012975914</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37752930">https://zhuanlan.zhihu.com/p/37752930</a></li>
<li><a href="https://gohugo.io/hosting-and-deployment/hosting-on-github/">https://gohugo.io/hosting-and-deployment/hosting-on-github/</a></li>
</ol>

      </div>
    </section>
    
    <section class="pagination clearfix">
      
      <a class="btn previous " href="https://sleephu.github.io/post/test/"> Test </a> 
       
      
      <a class="btn next " href="https://sleephu.github.io/post/bigdata1/"> hadoop Setup Tips </a> 
      
    </section>
    
    
  </div>
  
  <footer>
  <div class="footer-info">
    <p>
      <a href="mailto:jingyunhu.cr@gmail.com?subject="><i class="far fa-envelope"></i> jingyunhu.cr@gmail.com </a>
      {
        <a href="https://gohugo.io/" title="Hugo :: A fast and modern static website engine">Hugo 0.62.0-DEV</a>,
        <a href="https://github.com/IvanChou/yii.im" title="vec">Vec</a> 
      }
      {<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="CC BY-NC-ND 3.0">CC BY-NC-ND 3.0</a>}
    </p>
  </div>
</footer>
  
  <script src="https://sleephu.github.io/js/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-75736312-2', 'auto');
ga('send', 'pageview');

</script>


</body>

</html>
